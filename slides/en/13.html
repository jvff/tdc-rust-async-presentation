<div>
    <h1>Task</h1>

    <ul>
        <li data-slide-steps="1-">Struct <code data-slide-steps="1-">futures::task::Task</code> provides access to a task
        </li><li data-slide-steps="2-">Allows waking up the task when an operation associated to the task is ready
            <ul>
                <li data-slide-steps="3-">A task contains at least one operation</li>
                <li data-slide-steps="4-">The task is parked awaiting one of its operations</li>
                <li data-slide-steps="5-">When an operation is ready</li>
                <li data-slide-steps="6-"><code>Task::wake()</code> is used to notify it</li>
                <li data-slide-steps="7-">An executor can then execute it</li>
            </ul>
        </li>
    </ul>

    <svg viewBox="0 0 1000 200">
        <defs>
            <g id="arrow-head">
                <path d="M-20 -20 L0 0 L-20 20"></path>
            </g>
            <g id="mini-arrow-head">
                <path d="M-8 -8 L0 0 L-8 8"></path>
            </g>
            <g id="thread">
                <path d="M0 0 q 10 10 -10 20 t 0 20 0 20 0 20 0 20 0 20 0 20"></path>
            </g>
            <g id="task">
                <rect x="-25" y="-25" width="50" height="50"></rect>
            </g>
            <g id="future">
                <circle cx="0" cy="0" r="10"></circle>
            </g>
            <g id="executor">
                <rect x="-45" y="-45" width="90" height="90" rx="20" ry="20"></rect>
            </g>
            <g id="hide-task">
                <rect style="stroke: none; fill: white" x="-30" y="-30" width="60" height="60"></rect>
            </g>
        </defs>

        <g transform="translate(100, 50)" style="fill: none; stroke: black; stroke-width: 3" data-slide-steps="1-">
            <use xlink:href="#task" x="120" y="20" data-slide-steps="1-"></use>
            <use xlink:href="#future" x="120" y="20" data-slide-steps="3-"></use>

            <g style="stroke: red" data-slide-steps="4-">
                <use xlink:href="#hide-task" x="120" y="20"></use>
                <use xlink:href="#task" x="120" y="20"></use>
                <use xlink:href="#future" x="120" y="20"></use>
            </g>

            <g data-slide-steps="5-">
                <use xlink:href="#hide-task" x="120" y="20"></use>
                <use xlink:href="#task" style="stroke: red" x="120" y="20"></use>
                <use xlink:href="#future" style="stroke: green" x="120" y="20"></use>
            </g>

            <g data-slide-steps="6-">
                <use xlink:href="#hide-task" x="120" y="20"></use>
                <use xlink:href="#task" style="stroke: blue" x="120" y="20"></use>
                <use xlink:href="#future" style="stroke: green" x="120" y="20"></use>
            </g>

            <g data-slide-steps="7-">
                <use xlink:href="#hide-task" x="120" y="20"></use>
                <use xlink:href="#executor" style="stroke: black" x="120" y="20"></use>
                <use xlink:href="#task" style="stroke: green" x="120" y="20"></use>
                <use xlink:href="#future" style="stroke: green" x="120" y="20"></use>
            </g>
        </g>
    </svg>

    <ul>
        <li data-slide-steps="8-"><code>futures::task::current()</code> returns the current <code>Task</code></li>
    </ul>

    <svg viewBox="0 0 1000 200">
        <g style="fill: none; stroke: black; stroke-width: 3" data-slide-steps="8-">
            <use xlink:href="#thread" x="100" y="20"></use>
            <g style="stroke: gray; stroke-width: 10" transform="translate(230,80)">
                <use xlink:href="#arrow-head" x="0" y="0"></use>
                <line x1="0" y1="0" x2="-100" y2="0"></line>
            </g>
            <use xlink:href="#task" x="300" y="80"></use>
        </g>
    </svg>
</div>
